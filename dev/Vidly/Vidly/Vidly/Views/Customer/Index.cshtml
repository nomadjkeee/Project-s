@using Vidly.ViewModel
@model SomeFilmViewModel
@{
    ViewBag.Title = "Index";
}

@using (Html.BeginForm("NewCustomer", "Customer", FormMethod.Get))
{
    <br /><br />
    <div class="form-group">
        <button type="submit" class="btn btn-primary">New Customer</button>
    </div>
}
    <div class="table-hover">
        <table id="customers" class="table table-bordered">
            <thead>
                <tr>
                    <th>
                        <h5>№</h5>
                    </th>
                    <th>
                        <h5>Name</h5>
                    </th>
                    <th>
                        <h5>Birthday</h5>
                    </th>
                    <th>
                        <h5>Email</h5>
                    </th>
                    <th>
                        <h5>MemberShip</h5>
                    </th>
                    <th>
                        <h5>Delete</h5>
                    </th>
                    
                </tr>
            </thead>
            @foreach (var item in Model.Customers)
            {
                <tr>
                    <td style="text-align:left;margin:1px 2px 1px 2px">
                        @item.Id
                    </td>
                    <td style="text-align:center">
                        @Html.ActionLink(item.Name, "Details", item)
                    </td>
                    <td>
                        @item.Birthhday
                    </td>
                    <td>
                        @item.Email
                    </td>
                    <td>
                        @item.MemberShip.MemberShipType
                    </td>
                    <td>
                        <button data-customer-id="@item.Id" class="btn-link js-delete">Delete</button>
                    </td>
                    
                </tr>
            }
        </table>
    </div>
@section scripts{ 
  <script>
      $(document).ready(function () {
          $("#customers .js-delete").on("click", function () {
              var button = $(this);
              if (confirm("Are you sure to want delete customer ?")) {
                  $.ajax({
                      url: "api/customers/" + button.attr("data-customer-Id"),
                      method: "DELETE",
                      success: function () {
                          button.parents("tr").remove();
                      }
                  })
              }
          });
      });
  </script>
}





